# -*- coding: utf-8 -*-

__author__      = "Isaac Lo"
__copyright__   = "© Copyright Isaac Lo 2015. All Rights Reserved"

import threading
import time
import os
import random
from pykeyboard import PyKeyboard

#initialize the level

game = [
        ["█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "█"],
        ["█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█", "█"]
    ]
##

keyinput = "w"

player = [[10,25]]

traillength = 1

score = -100

run = True


def clear():
    os.system(['clear','cls'][os.name == 'nt'])

def updatescreen():
    global game
    global run
    global score
    if run == True:
        clear()
        print
        for i in xrange (0, len(game)):
            print " " + "".join(game[i])
        print "\n " + "SCORE: " + str(score)
            

def thegame(input):
    global player
    global game
    global traillength
    global run
    a = 0
    b = 0
    y = player[len(player)-1][0]
    x = player[len(player)-1][1]
    if input == "w":
        a = -1
    elif input == "s":
        a = 1
    elif input == "d":
        b = 1
    elif input == "a":
        b = -1
    elif input == "q":
        clear()
        run = False
        print "\n SCORE: " + str(score) + "\n"
        time.sleep(1)
        exit()
    
    check(y+a, x+b)
    
def check(y, x):
    global game
    global run
    global score
    
    if game[y][x] == " ":
        player.append([y, x])
        game[y][x] = "█"
        
    elif game[y][x] == "█":
        clear()
        print
        print " ████ ███ █████ ███"
        print " █    █ █ █ █ █ █  "
        print " █ ██ ███ █ █ █ ███"
        print " █  █ █ █ █ █ █ █  "
        print " ████ █ █ █ █ █ ███"
        print
        print " ███ █ █ ███ ███"
        print " █ █ █ █ █   █ █"
        print " █ █ █ █ ███ ██ "
        print " █ █ █ █ █   █ █"
        print " ███ ███ ███ █ █"
        print
        print " SCORE: " + str(score)
        print
        run = False
        time.sleep(1)
        exit()
        
    elif game[y][x] == "●":
        ballplace()
        player.append([y, x])
        game[y][x] = "█"
        
    if len(player) > traillength:
        game[player[0][0]][player[0][1]] = " "
        player.pop(0)

def ballplace():
    global traillength
    global game
    global score
    traillength = traillength + 2
    score = score + 100
    randy = random.randint(1,len(game) - 2)
    randx = random.randint(1,len(game[1]) - 2)
    while game[randy][randx] == "█":
        randy = random.randint(1,len(game) - 2)
        randx = random.randint(1,len(game[1]) - 2)
    game[randy][randx] = "●"
    
def enter():
    global run

    while run == True:
        time.sleep(0.1)
        PyKeyboard().tap_key('\n')
        
clear()

print
print " ███ ███ ███ █ █ ███"
print " █   █ █ █ █ █ █ █  "
print " ███ █ █ ███ ██  ███"
print "   █ █ █ █ █ █ █ █  "
print " ███ █ █ █ █ █ █ ███"
print
print " © COPYRIGHT ISAAC LO 2015. ALL RIGHTS RESERVED"
print
raw_input(" PRESS THE ENTER KEY TO PLAY... ")

game[player[0][0]][player[0][1]] = "█"
ballplace()

threading.Thread(target=enter).start()

while run == True:
    oldkeyinput = keyinput[0]
    thegame(keyinput[0])
    updatescreen()
    keyinput = raw_input().lower()
    if keyinput not in ("w", "a", "s", "d", "q"):
        keyinput = oldkeyinput
    elif (keyinput == "w" and oldkeyinput == "s") or (keyinput == "s" and oldkeyinput == "w") or (keyinput == "a" and oldkeyinput == "d") or (keyinput == "d" and oldkeyinput == "a"):
        keyinput = oldkeyinput
